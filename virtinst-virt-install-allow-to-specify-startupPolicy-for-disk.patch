From 01644f4e0cb8363f5a9ad83ce89a4678e5585542 Mon Sep 17 00:00:00 2001
From: Giuseppe Scrivano <gscrivan@redhat.com>
Date: Thu, 3 Oct 2013 14:58:56 +0200
Subject: [PATCH 2/2] virt-install: allow to specify "startupPolicy" for --disk

Signed-off-by: Giuseppe Scrivano <gscrivan@redhat.com>
(cherry picked from commit 8e8584054610c7e77f921b5c2585f0b02119101b)

Conflicts:
	virtinst/cli.py
---
 man/en/virt-install.pod | 5 +++++
 virtinst/cli.py         | 1 +
 2 files changed, 6 insertions(+)

diff --git a/man/en/virt-install.pod b/man/en/virt-install.pod
index 811b36c..63b9c69 100644
--- a/man/en/virt-install.pod
+++ b/man/en/virt-install.pod
@@ -549,6 +549,11 @@ Serial number of the emulated disk device. This is used in linux guests
 to set /dev/disk/by-id symlinks. An example serial number might be:
 WD-WMAP9A966149
 
+=item B<startup_policy>
+
+It defines what to do with the disk if the source file is not accessible.  See
+possible values in L<http://www.libvirt.org/formatdomain.html#elementsDisks>
+
 =back
 
 See the examples section for some uses. This option deprecates C<--file>,
diff --git a/virtinst/cli.py b/virtinst/cli.py
index 51e5486..46c32c1 100644
--- a/virtinst/cli.py
+++ b/virtinst/cli.py
@@ -1586,6 +1586,7 @@ def parse_disk(guest, optstr, dev=None):
     set_param("driver_io", "io")
     set_param("error_policy", "error_policy")
     set_param("serial", "serial")
+    set_param("startup_policy", "startup_policy")
 
     if opts:
         fail(_("Unknown options %s") % opts.keys())
-- 
1.9.0

