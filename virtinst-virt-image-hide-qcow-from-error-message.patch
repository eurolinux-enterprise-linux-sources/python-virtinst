From ee22b968cdc7cdc6d2bff1f1a05434d01dfefdee Mon Sep 17 00:00:00 2001
From: Giuseppe Scrivano <gscrivan@redhat.com>
Date: Wed, 14 May 2014 10:00:13 +0200
Subject: [PATCH] virt-image: hide "qcow" from error message

RHEL-only

Closes: https://bugzilla.redhat.com/show_bug.cgi?id=1095204

Signed-off-by: Giuseppe Scrivano <gscrivan@redhat.com>
---
 virtinst/ImageParser.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/virtinst/ImageParser.py b/virtinst/ImageParser.py
index 32da148..3ef8779 100644
--- a/virtinst/ImageParser.py
+++ b/virtinst/ImageParser.py
@@ -228,9 +228,10 @@ class Disk:
             csumvalue = xpathString(d, "")
             self.csum[csumtype] = csumvalue
         formats = [Disk.FORMAT_RAW, Disk.FORMAT_QCOW, Disk.FORMAT_QCOW2, Disk.FORMAT_VMDK, Disk.FORMAT_ISO]
+        hide = [Disk.FORMAT_QCOW]
         validate(formats.count(self.format) > 0,
                  _("The format for disk %s must be one of %s") %
-                 (self.file, ",".join(formats)))
+                 (self.file, ",".join([x for x in formats if x not in hide])))
 
     def check_disk_signature(self, meter=None):
         try:
-- 
1.9.0

